# AGENTS.md - Fear Project

This is a Godot 4.6 game project. Follow these guidelines when contributing.

## Build/Lint/Test Commands

This project uses the Godot Engine editor. There are no automated build, lint, or test commands configured.

- To run the project: Open in Godot Engine and press F5 or click Play
- The main scene is defined in `project.godot`

## Code Style Guidelines

### File Structure

- Scenes (.tscn) are organized by feature: `Player/`, `Enemy/`, `Scenes/`, `Scripts/`, `assets/`
- Each scene has a corresponding `.gd` script file (e.g., `Player/gun.tscn` + `Player/gun.gd`)
- Asset imports are auto-generated by Godot (`.import` files) and should not be manually edited

### GDScript Style

#### Indentation
- Use tabs for indentation (4-character width)

#### Naming Conventions
- Functions: `snake_case` (e.g., `_ready`, `update_nearest_enemy`)
- Variables: camelCase is common, but Chinese names are also used (e.g., `子弹速度`, `移动速度`, `初始角度`)
- Classes/Types: PascalCase (e.g., `Node2D`, `Area2D`, `CharacterBody2D`)
- Constants: `UPPER_CASE`
- Private variables: prefix with `_` (though not consistently used)

#### Type Annotations
- Always use type hints for exported variables: `@export var move_speed: float = 30.0`
- Use type hints for function parameters: `func _physics_process(delta: float) -> void`
- Use type hints for return types: `func get_enemy(enemy: Node2D)`

#### Comments
- Use `#` for comments
- Chinese comments are acceptable and encouraged (e.g., `# 找到玩家节点`)
- Comments should explain "why" not "what"

#### Error Handling
- Use `push_error()` for critical errors that prevent execution
- Check for null/invalid instances before accessing: `if target_enemy and is_instance_valid(target_enemy)`
- Use `is_in_group()` for type checking in collision logic

#### Node/Scene Patterns
- Extends appropriate Godot node types: `extends Area2D`, `extends CharacterBody2D`, `extends Node2D`
- Use `@export` for editor-exposed properties
- Use groups for entity categorization: `add_to_group("Player")`, `add_to_group("Enemy")`
- Find nodes with `find_child()` for siblings, `get_tree().get_nodes_in_group()` for groups
- Use `_ready()` for initialization, `_physics_process(delta)` for physics updates

#### Signal Connections
- Connect signals in `_ready()`: `detection_area.area_entered.connect(_on_body_entered)`
- Signal handlers follow naming convention: `_on_<node>_<signal>` (e.g., `_on_area_entered`, `_on_timer_timeout`)

#### Vector Math
- Use `global_position` for world-space calculations
- Normalize vectors: `direction.normalized()`
- Use distance checks: `global_position.distance_to(enemy.global_position)`
- Use `rotated()` and `angle_to()` for rotation calculations

#### Scene Instantiation
- Use `preload()` for scene loading: `preload("res://Player/bullet.tscn").instantiate()`
- Add to scene tree: `get_tree().current_scene.add_child(子弹)`
- Free nodes: `queue_free()` (preferred over `free()`)

### Configuration Files

- `project.godot` - Main Godot project configuration (edit via Godot editor UI)
- `.editorconfig` - UTF-8 charset enforced
- `.gitignore` - Ignores `.godot/`, `/android/`, `*.svg`, `*.import`

### Godot-Specific Notes

- Engine version: 4.6 with Forward Plus rendering
- Input actions defined in `[input]` section of `project.godot`: left, up, right, down (WASD)
- Texture filtering disabled: `textures/canvas_textures/default_texture_filter=0`
- Physics engine: Jolt Physics
